name: é¡¹ç›®å¥åº·æ£€æŸ¥

on:
  push:
    branches: [main]
  # æ·»åŠ æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:

jobs:
  analyze:
    runs-on: ubuntu-latest
    
    steps:
      # 1. è·å–ä»£ç 
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
      
      # 2. æ˜¾ç¤ºé¡¹ç›®ä¿¡æ¯
      - name: æ˜¾ç¤ºé¡¹ç›®ç»“æ„
        run: |
          echo "=== é¡¹ç›®æ¦‚å†µ ==="
          echo "æ–‡ä»¶æ€»æ•°: $(find . -type f | wc -l)"
          echo "æ–‡ä»¶å¤¹æ•°: $(find . -type d | wc -l)"
          echo "é¡¹ç›®å¤§å°: $(du -sh .)"
          
      # 3. æ£€æŸ¥å¸¸è§é¡¹ç›®æ–‡ä»¶
      - name: æ£€æŸ¥é…ç½®æ–‡ä»¶
        run: |
          echo "=== é…ç½®æ–‡ä»¶æ£€æŸ¥ ==="
          [ -f "package.json" ] && echo "âœ… æ‰¾åˆ° package.json (Node.jsé¡¹ç›®)" || echo "í³­ æ²¡æœ‰ package.json"
          [ -f "requirements.txt" ] && echo "âœ… æ‰¾åˆ° requirements.txt (Pythoné¡¹ç›®)" || echo "í³­ æ²¡æœ‰ requirements.txt"
          [ -f "Dockerfile" ] && echo "âœ… æ‰¾åˆ° Dockerfile" || echo "í³­ æ²¡æœ‰ Dockerfile"
          [ -f ".gitignore" ] && echo "âœ… æ‰¾åˆ° .gitignore" || echo "âš ï¸  æ²¡æœ‰ .gitignore"
          
      # 4. æ£€æŸ¥æ–‡ä»¶ç±»å‹ç»Ÿè®¡
      - name: æ–‡ä»¶ç±»å‹ç»Ÿè®¡
        run: |
          echo "=== æ–‡ä»¶ç±»å‹ç»Ÿè®¡ ==="
          echo "Markdownæ–‡ä»¶: $(find . -name "*.md" | wc -l)"
          echo "YAMLæ–‡ä»¶: $(find . -name "*.yml" -o -name "*.yaml" | wc -l)"
          echo "JavaScriptæ–‡ä»¶: $(find . -name "*.js" | wc -l)"
          echo "Pythonæ–‡ä»¶: $(find . -name "*.py" | wc -l)"
          
      # 5. ç”ŸæˆæŠ¥å‘Š
      - name: ç”Ÿæˆæ£€æŸ¥æŠ¥å‘Š
        run: |
          echo "=== æ£€æŸ¥å®Œæˆ ==="
          date
